<!DOCTYPE html>
<html lang="ar" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOSSLIM TUBE - Likes System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { background-color: #0f172a; background-image: radial-gradient(at 0% 0%, hsla(253, 16%, 7%, 1) 0, transparent 50%), radial-gradient(at 50% 0%, hsla(225, 39%, 30%, 1) 0, transparent 50%); background-attachment: fixed; color: white; font-family: 'Outfit', sans-serif; }
        .glass-panel { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .input-field { background: rgba(15, 23, 42, 0.6); border: 1px solid rgba(255, 255, 255, 0.1); color: white; }
        #maintenanceOverlay { display:none; position:fixed; inset:0; z-index:100; background:rgba(15,23,42,0.95); align-items:center; justify-content:center; flex-direction:column; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">

    <div id="maintenanceOverlay">
        <h1 class="text-4xl font-bold text-red-500 mb-4">Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØªØ­Øª Ø§Ù„ØµÙŠØ§Ù†Ø© ğŸ› ï¸</h1>
        <p class="text-slate-400">Ø§Ù„Ø£Ø¯Ù…Ù† ÙŠÙ‚ÙˆÙ… Ø¨ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø¸Ø§Ù…ØŒ Ø§Ù†ØªØ¸Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹...</p>
    </div>

    <div class="glass-panel rounded-2xl w-full max-w-lg p-8 relative overflow-hidden">
        <div class="text-center mb-6">
            <h1 class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-cyan-400">MOSSLIM LIKES</h1>
            <div id="userInfo" class="mt-2 text-sm text-indigo-300">Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ø¨Ø¯Ø¡ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù…</div>
        </div>

        <button id="googleLoginBtn" onclick="login()" class="w-full mb-6 bg-white text-black p-3 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-slate-200 transition-all">
            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg" width="20">
            ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø¬ÙˆØ¬Ù„
        </button>

        <form id="likesForm" class="space-y-4 opacity-50 pointer-events-none">
            <input type="text" id="id" placeholder="ID Ø§Ù„Ø­Ø³Ø§Ø¨" class="input-field w-full px-4 py-3 rounded-xl outline-none">
            <input type="text" id="coupon" placeholder="ÙƒÙˆØ¯ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†" class="input-field w-full px-4 py-3 rounded-xl outline-none">
            <button type="submit" class="w-full bg-indigo-600 p-3 rounded-xl font-bold hover:bg-indigo-500">Ø§Ø±Ø³Ù„ Ø§Ù„Ù„Ø§ÙŠÙƒØ§Øª Ø§Ù„Ø¢Ù†</button>
        </form>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js";
        import { getDatabase, ref, onValue, push } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCPl7IapoP82wZq-PlJZ9y4Jm5p-7JrFxw",
            authDomain: "moim-system.firebaseapp.com",
            projectId: "moim-system",
            storageBucket: "moim-system.firebasestorage.app",
            messagingSenderId: "680675651442",
            appId: "1:680675651442:web:caa969aee19a02822db7eb",
            measurementId: "G-PFVYN2JF3C"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getDatabase(app);
        const provider = new GoogleAuthProvider();

        window.login = () => signInWithPopup(auth, provider);

        onAuthStateChanged(auth, (user) => {
            if (user) {
                document.getElementById('googleLoginBtn').style.display = 'none';
                document.getElementById('likesForm').style.opacity = '1';
                document.getElementById('likesForm').style.pointerEvents = 'auto';
                document.getElementById('userInfo').innerText = `Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ: ${user.displayName}`;
                
                // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ù‡Ùˆ Ø¥ÙŠÙ…ÙŠÙ„ÙƒØŒ ÙŠØ¸Ù‡Ø± Ø²Ø± Ø§Ù„Ø£Ø¯Ù…Ù†
                if (user.email === "mnasfsam@gmail.com") {
                    const adminBtn = document.createElement('button');
                    adminBtn.innerHTML = "ğŸ› ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…";
                    adminBtn.className = "fixed bottom-5 right-5 bg-gold-500 bg-yellow-500 text-black p-3 rounded-full font-bold shadow-2xl";
                    adminBtn.onclick = () => window.location.href = 'admin.html';
                    document.body.appendChild(adminBtn);
                }
                // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø²ÙŠØ§Ø±Ø©
                push(ref(db, 'logs'), { user: user.displayName, email: user.email, time: new Date().toLocaleString() });
            }
        });

        // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„ÙÙˆØ±ÙŠØ© Ù…Ù† Ø§Ù„Ø£Ø¯Ù…Ù†
        onValue(ref(db, 'system/command'), (snapshot) => {
            const cmd = snapshot.val();
            if (cmd) {
                if (cmd.type === "alert") Swal.fire("ØªÙ†Ø¨ÙŠÙ‡ Ù…Ù† Ø§Ù„Ø£Ø¯Ù…Ù†", cmd.text, "info");
                if (cmd.type === "maintenance") document.getElementById('maintenanceOverlay').style.display = 'flex';
                if (cmd.type === "stop_maintenance") document.getElementById('maintenanceOverlay').style.display = 'none';
            }
        });
    </script>
</body>
</html>
